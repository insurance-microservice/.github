{
	"info": {
		"_postman_id": "8fa98243-3611-4c8a-9ddb-9434f015c384",
		"name": "Insurance Microservices API",
		"description": "Complete API collection for Insurance Microservices platform. All requests are routed through API Gateway at http://localhost:8080",
		"schema": "https://schema.getpostman.com/json/collection/v2.0.0/collection.json",
		"_exporter_id": "31936564"
	},
	"item": [
		{
			"name": "Authentication",
			"item": [
				{
					"name": "Register User",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"username\": \"john_doe\",\n  \"email\": \"john@example.com\",\n  \"password\": \"password123\"\n}"
						},
						"url": "http://localhost:8080/api/v1/auth/register",
						"description": "Register a new user. Fields: username, email, password"
					},
					"response": []
				},
				{
					"name": "Login User",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = pm.response.json();",
									"if (jsonData.accessToken) {",
									"    pm.collectionVariables.set(\"jwt_token\", jsonData.accessToken);",
									"    console.log(\"JWT token automatically set from login response\");",
									"}"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"identity\": \"admin\",\n  \"password\": \"admin321\"\n}"
						},
						"url": "http://localhost:8080/api/v1/auth/login",
						"description": "Login user and receive JWT token. Use 'identity' field (username or email). Response contains 'accessToken' field"
					},
					"response": []
				}
			],
			"description": "User registration and login endpoints"
		},
		{
			"name": "Customer Management",
			"item": [
				{
					"name": "Get All Customers",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}",
								"type": "text"
							}
						],
						"url": "http://localhost:8080/api/v1/customer/all",
						"description": "Retrieve all customers (requires ADMIN role)"
					},
					"response": []
				},
				{
					"name": "Get Customer by ID",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}",
								"type": "text"
							}
						],
						"url": "http://localhost:8080/api/v1/customer/1",
						"description": "Retrieve a specific customer by ID. Fields returned: customerId, fullName, email, phone, age"
					},
					"response": []
				},
				{
					"name": "Create Customer",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"fullName\": \"Jane Smith\",\n  \"email\": \"jane.smith@example.com\",\n  \"phone\": \"+1234567890\",\n  \"age\": 28\n}"
						},
						"url": "http://localhost:8080/api/v1/customer",
						"description": "Create a new customer. Required fields: fullName, email, phone, age"
					},
					"response": []
				},
				{
					"name": "Update Customer",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"fullName\": \"Jane Smith Updated\",\n  \"email\": \"jane.updated@example.com\",\n  \"phone\": \"+9876543210\",\n  \"age\": 29\n}"
						},
						"url": "http://localhost:8080/api/v1/customer/1",
						"description": "Update an existing customer (requires ADMIN role). All fields can be updated"
					},
					"response": []
				}
			],
			"description": "Customer CRUD operations"
		},
		{
			"name": "Policy Management",
			"item": [
				{
					"name": "Get Customer Policies",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}",
								"type": "text"
							}
						],
						"url": "http://localhost:8080/api/v1/policy/customer/1",
						"description": "Get all policies for a specific customer. Returns list of PolicyResponseDto"
					},
					"response": []
				},
				{
					"name": "Get Policy by ID",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}",
								"type": "text"
							}
						],
						"url": "http://localhost:8080/api/v1/policy/1",
						"description": "Get a specific policy by ID. Fields: policyId, customerId, policyNumber, type, premiumAmount, coverageAmount, status, startDate, endDate"
					},
					"response": []
				},
				{
					"name": "Create Policy",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"customerId\": 1,\n  \"policyType\": \"HEALTH\",\n  \"premiumAmount\": 5000.00,\n  \"coverageAmount\": 100000.00\n}"
						},
						"url": "http://localhost:8080/api/v1/policy",
						"description": "Create a new insurance policy. Required fields: customerId, policyType, premiumAmount, coverageAmount"
					},
					"response": []
				}
			],
			"description": "Insurance policy CRUD and query operations"
		},
		{
			"name": "Claim Management",
			"item": [
				{
					"name": "Get Claims by Policy",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}",
								"type": "text"
							}
						],
						"url": "http://localhost:8080/api/v1/claim/policy/1",
						"description": "Get all claims for a specific policy. Returns list of ClaimDto"
					},
					"response": []
				},
				{
					"name": "Get Claim by ID",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}",
								"type": "text"
							}
						],
						"url": "http://localhost:8080/api/v1/claim/1",
						"description": "Get a specific claim by ID. Fields: claimId, policyId, claimNumber, description, status, createdAt, approvedAt"
					},
					"response": []
				},
				{
					"name": "Submit Claim",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"policyId\": 1,\n  \"description\": \"Medical expenses due to hospitalization\",\n  \"claimNumber\": \"CLM-001\",\n  \"status\": \"SUBMITTED\"\n}"
						},
						"url": "http://localhost:8080/api/v1/claim",
						"description": "Submit a new insurance claim. Required fields: policyId, description, claimNumber, status"
					},
					"response": []
				},
				{
					"name": "Approve Claim",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}",
								"type": "text"
							}
						],
						"url": "http://localhost:8080/api/v1/claim/approve/1",
						"description": "Approve a submitted claim (requires ADMIN role)"
					},
					"response": []
				}
			],
			"description": "Insurance claim submission and tracking"
		},
		{
			"name": "Payment Management",
			"item": [
				{
					"name": "Get Payments by Policy",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}",
								"type": "text"
							}
						],
						"url": "http://localhost:8080/api/v1/payment/policy/1",
						"description": "Get all payments for a specific policy. Returns list of PaymentDto"
					},
					"response": []
				},
				{
					"name": "Get Payment by ID",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}",
								"type": "text"
							}
						],
						"url": "http://localhost:8080/api/v1/payment/1",
						"description": "Get a specific payment by ID. Fields: paymentId, policyId, amount, status, billingDate, paymentDate"
					},
					"response": []
				},
				{
					"name": "Create Payment",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"policyId\": 1,\n  \"amount\": 5000.00,\n  \"status\": \"PENDING\",\n  \"billingDate\": \"2024-12-01\"\n}"
						},
						"url": "http://localhost:8080/api/v1/payment",
						"description": "Create a new payment. Required fields: policyId, amount, status, billingDate"
					},
					"response": []
				},
				{
					"name": "Update Payment",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"policyId\": 1,\n  \"amount\": 5000.00,\n  \"status\": \"COMPLETED\",\n  \"billingDate\": \"2024-12-01\",\n  \"paymentDate\": \"2024-12-01\"\n}"
						},
						"url": "http://localhost:8080/api/v1/payment/1",
						"description": "Update an existing payment. All fields can be updated: policyId, amount, status, billingDate, paymentDate"
					},
					"response": []
				}
			],
			"description": "Payment processing and tracking"
		},
		{
			"name": "Test Flow",
			"item": [
				{
					"name": "1. Login Admin",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = pm.response.json();",
									"if (jsonData.accessToken) {",
									"    pm.collectionVariables.set(\"jwt_token\", jsonData.accessToken);",
									"    console.log(\"JWT token automatically set from login response\");",
									"}"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"identity\": \"admin\",\n  \"password\": \"admin321\"\n}"
						},
						"url": "http://localhost:8080/api/v1/auth/login",
						"description": "Step 2: Login to get JWT token"
					},
					"response": []
				},
				{
					"name": "2. Create Customer",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"fullName\": \"Test Customer\",\n  \"email\": \"test.customer@example.com\",\n  \"phone\": \"+1234567890\",\n  \"age\": 30\n}"
						},
						"url": "http://localhost:8080/api/v1/customer",
						"description": "Step 3: Create a test customer"
					},
					"response": []
				},
				{
					"name": "3. Create Policy (ADMIN)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"customerId\": 1,\n  \"policyType\": \"HEALTH\",\n  \"premiumAmount\": 5000.00,\n  \"coverageAmount\": 100000.00\n}"
						},
						"url": "http://localhost:8080/api/v1/policy",
						"description": "Step 4: Create an insurance policy"
					},
					"response": []
				},
				{
					"name": "4. Process Payment (ADMIN)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"policyId\": 1,\n  \"amount\": 5000.00,\n  \"status\": \"PENDING\",\n  \"billingDate\": \"2024-12-01\"\n}"
						},
						"url": "http://localhost:8080/api/v1/payment",
						"description": "Step 5: Process payment for policy"
					},
					"response": []
				},
				{
					"name": "5. Get Policy Status",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}",
								"type": "text"
							}
						],
						"url": "http://localhost:8080/api/v1/policy/1",
						"description": "Step 6: Verify policy status is ACTIVE"
					},
					"response": []
				},
				{
					"name": "6. Submit Claim",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"policyId\": 1,\n  \"description\": \"Test claim for automation\",\n  \"claimNumber\": \"CLM-AUTO-001\",\n  \"status\": \"PENDING\"\n}"
						},
						"url": "http://localhost:8080/api/v1/claim",
						"description": "Step 7: Submit a test claim"
					},
					"response": []
				},
				{
					"name": "7. Approve Claim (ADMIN only)",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}",
								"type": "text"
							}
						],
						"url": "http://localhost:8080/api/v1/claim/approve/1",
						"description": "Step 8: Approve the submitted claim (Admin only)"
					},
					"response": []
				},
				{
					"name": "8. Verify Final State",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}",
								"type": "text"
							}
						],
						"url": "http://localhost:8080/api/v1/claim/policy/1",
						"description": "Step 9: Verify claim is in APPROVED state"
					},
					"response": []
				}
			],
			"description": "Complete end-to-end test flow for the insurance platform"
		}
	],
	"variable": [
		{
			"key": "jwt_token",
			"value": "",
			"type": "string",
			"description": {
				"content": "JWT token from login response - update after each login",
				"type": "text/plain"
			}
		}
	]
}